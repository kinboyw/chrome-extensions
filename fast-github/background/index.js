!function(n){"function"==typeof define&&define.amd?define(n):n()}((function(){"use strict";const n={importOldList:!1,speedNumber:1,speedList:"https://gh.api.99988866.xyz/",token:"",language:"nothing",webIDE:"GitHub1s.Com"},e=[{code:"ar",eng_name:"arabic",chn_name:"阿拉伯语"},{code:"de",eng_name:"german",chn_name:"德语"},{code:"ru",eng_name:"russian",chn_name:"俄语"},{code:"fr",eng_name:"french",chn_name:"法语"},{code:"fil",eng_name:"filipino",chn_name:"菲律宾语"},{code:"km",eng_name:"khmer",chn_name:"高棉语"},{code:"ko",eng_name:"korean",chn_name:"韩语"},{code:"lo",eng_name:"laos",chn_name:"老挝语"},{code:"pt",eng_name:"portuguese",chn_name:"葡萄牙语"},{code:"es",eng_name:"spanish",chn_name:"西班牙语"},{code:"it",eng_name:"italian",chn_name:"意大利语"},{code:"id",eng_name:"indonesian",chn_name:"印度尼西亚语"},{code:"en",eng_name:"english",chn_name:"英语"},{code:"vi",eng_name:"vietnamese",chn_name:"越南语"},{code:"zh",eng_name:"chinese",chn_name:"中文"}],t=async()=>{var e;return null!=(e=(await chrome.storage.sync.get("configs")).configs)?e:n};chrome.runtime.onInstalled.addListener((n=>{const{reason:e}=n;"install"!==e?t().then((n=>{n.importOldList||"update"===e&&chrome.runtime.openOptionsPage()})):chrome.runtime.openOptionsPage()})),chrome.runtime.onMessage.addListener(((n,a,o)=>{const c=n.content;return(async n=>{const a=await t();return new Promise(((t,o)=>{fetch("https://transmart.qq.com/api/imt",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({header:{fn:"lang_detect",token:a.token},text:n})}).then((n=>n.json())).then((o=>{const{language:c}=o,i=e.find((n=>n.eng_name.toLowerCase()===c.toLowerCase()));i?fetch("https://transmart.qq.com/api/imt",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({header:{fn:"auto_translation_block",token:a.token},type:"plain",source:{lang:i.code,text_block:n},target:{lang:a.language}})}).then((n=>n.json())).then((n=>{t([n.auto_translation,null])})).catch((()=>{t([null,"翻译发生错误"])})):t([null,"该语言无法识别翻译"])})).catch((()=>t([null,"翻译发生错误"])))}))})(c).then((n=>{(n=>{const[e,t]=n;let a={content:""};e&&(a.content=e),t&&(a.content=t),o(a)})(n)})),!0}))}));
